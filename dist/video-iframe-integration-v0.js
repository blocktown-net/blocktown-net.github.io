(function(){var g;function k(a){return a||{}};var l;function n(a,c,b){var d=void 0,e=a,p=b;var f=function(a){try{return p(a)}catch(t){throw self.__AMP_REPORT_ERROR(t),t;}};var h=q(),m=!1;d&&(m=d.capture);e.addEventListener(c,f,h?d:m)}function q(){if(void 0!==l)return l;l=!1;try{var a={get capture(){l=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(c){}return l};function r(a){new Promise(function(c){c(a())})};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function u(a,c){c=void 0===c?"":c;try{return decodeURIComponent(a)}catch(b){return c}};var v=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function w(a){var c=Object.create(null);if(!a)return c;for(var b;b=v.exec(a);){var d=u(b[1],b[1]);b=b[2]?u(b[2].replace(/\+/g," "),b[2]):"";c[d]=b}return c};var x="";
function y(a){var c=a||self;if(c.__AMP_MODE)var b=c.__AMP_MODE;else{b=c;var d=self.AMP_CONFIG||{},e=!!d.test||!(!b.__AMP_TEST&&!b.__karma__),p=b.__karma__&&b.__karma__.config.amp.testOnIe,f=!!d.localDev||e,h=w(b.location.originalHash||b.location.hash);d=d.spt;var m=w(b.location.search);x||(x=f?"1910151804560":b.AMP_CONFIG&&b.AMP_CONFIG.v?b.AMP_CONFIG.v:"011910151804560");b={localDev:f,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(h.development)||b.AMP_DEV_MODE),examiner:"2"==h.development,
filter:h.filter,geoOverride:h["amp-geo"],userLocationOverride:h["amp-user-location"],minified:!0,lite:void 0!=m.amp_lite,test:e,testIe:p,log:h.log,version:"1910151804560",rtvVersion:x,singlePassType:d};b=c.__AMP_MODE=b}return b};function z(a){var c=!1,b=null,d=a;return function(a){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];c||(b=d.apply(self,e),c=!0,d=null);return b}};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function A(a,c,b){n(a,c,b)};function B(a){var c;try{return JSON.parse(a)}catch(b){return c&&c(b),null}};function C(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];if(!a)throw Error(b.join(" "));return a}var D="pause play mute unmute fullscreenenter fullscreenexit showcontrols hidecontrols".split(" "),E="canplay load playing pause ended muted unmuted".split(" ");
function F(a){var c=this;this.C=!0;this.w=0;this.h={};this.c=a;this.j={};this.m=z(function(){G(c.c,function(a){var b=a.id;"number"===typeof b&&isFinite(b)&&c.h[b]?((0,c.h[b])(a.args),delete c.h[b]):"method"==a.event&&(a=a.method,a in c.j&&c.j[a].call())})});this.o=this.l=!1;this.A=z(function(){var a=B(c.c.name),d=a.canonicalUrl,e=a.sourceUrl;return{canonicalUrl:d,sourceUrl:e}})}g=F.prototype;g.getMetadata=function(){return this.A()};
g.method=function(a,c){C(-1<D.indexOf(a),"Invalid method "+a+".");var b="play"==a||"pause"==a?H(c):c;this.j[a]=b;this.m()};
g.listenTo=function(a,c,b){var d=this;C(!this.o,"%s `listenTo` is meant to be used once per page.","<amp-video-iframe>");var e={jwplayer:function(){C(!b,"%s jwplayer integration does not take an initializer","<amp-video-iframe>");d.B(c)},videojs:function(){I(d,c,b)}};C(e[a.toLowerCase()],"%s Invalid listener type ["+a+"]. Valid types are ["+(Object.keys(e).join(", ")+"]"),"<amp-video-iframe>")();this.o=!0};
g.B=function(a){var c=arguments,b=this;["error","setupError"].forEach(function(e){a.on(e,function(){C.apply(null,[!1].concat(c));b.postEvent("error")})});["adSkipped","adComplete","adError"].forEach(function(c){a.on(c,function(){return b.postEvent("ad_end")})});a.on("adStarted",function(){return b.postEvent("ad_start")});var d={play:"playing",ready:"canplay",pause:"pause"};Object.keys(d).forEach(function(c){a.on(c,function(){return b.postEvent(d[c])})});a.on("volume",function(a){return J(b,a.volume)});
this.method("play",function(){return a.play()});this.method("pause",function(){return a.pause()});this.method("mute",function(){return a.setMute(!0)});this.method("unmute",function(){return a.setMute(!1)});this.method("showcontrols",function(){return a.setControls(!0)});this.method("hidecontrols",function(){return a.setControls(!1)});this.method("fullscreenenter",function(){return a.setFullscreen(!0)});this.method("fullscreenexit",function(){return a.setFullscreen(!1)})};
function I(a,c,b){var d=C(b||a.c.videojs,"Video.JS not imported or initializer undefined."),e=d(c);e.ready(function(){var b="canplay";["playing","pause","ended"].forEach(function(b){e.on(b,function(){return a.postEvent(b)})});if(3<=e.readyState())a.postEvent(b);else e.on(b,function(){return a.postEvent(b)});A(c,"volumechange",function(){return J(a,e.volume())});a.method("play",function(){return e.play()});a.method("pause",function(){return e.pause()});a.method("mute",function(){return e.muted(!0)});
a.method("unmute",function(){return e.muted(!1)});a.method("showcontrols",function(){return e.controls(!0)});a.method("hidecontrols",function(){return e.controls(!1)});a.method("fullscreenenter",function(){return e.requestFullscreen()});a.method("fullscreenexit",function(){return e.exitFullscreen()})})}function J(a,c){.01>c?(a.l=!0,a.postEvent("muted")):a.l&&(a.l=!1,a.postEvent("unmuted"))}function H(a){return function(){try{r(function(){return a()})}catch(c){}}}
g.postEvent=function(a){C(-1<E.indexOf(a),"%s Invalid event ["+a+"]","<amp-video-iframe>");K(this,k({event:a}))};g.postAnalyticsEvent=function(a,c){K(this,k({event:"analytics",analytics:{eventType:a,vars:c}}))};function K(a,c,b){var d=a.w++,e=Object.assign({id:d},c);!y(a.c).test&&a.c.parent&&a.c.parent.postMessage(e,"*");b&&(a.h[d]=b)}g.getIntersection=function(a){this.m();K(this,k({method:"getIntersection"}),a)};function G(a,c){A(a,"message",function(a){(a=B(a.data))&&c(a)})}
function L(){var a=self;C(!a.__AMP__VIDEO_IFRAME__,"%s video-iframe-integration-v0.js should only be included once.");a.__AMP__VIDEO_IFRAME__=!0;a.__AMP_REPORT_ERROR=console.error.bind(console);var c=new F(a),b=a.AmpVideoIframe=a.AmpVideoIframe||[];b.push=function(a){return a(c)};b.forEach(b.push)}y(self).test||L();})();

//# sourceMappingURL=video-iframe-integration-v0.js.map
