(self.AMP=self.AMP||[]).push({n:"amp-skimlinks",v:"1910151804560",f:(function(AMP,_){
var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var q;a:{var ba={a:!0},r={};try{r.__proto__=ba;q=r.a;break a}catch(a){}q=!1}m=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var t=m;
function ca(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(t)t(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.za=b.prototype}var da=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a}(this);function ea(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function fa(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ha=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function u(a){var b=Object.create(null);if(!a)return b;for(var c;c=ha.exec(a);){var d=fa(c[1],c[1]),e=c[2]?fa(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var v="";function ia(a){var b=!1,c=null,d=a;return function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];b||(c=d.apply(self,e),b=!0,d=null);return c}};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function ja(){if(w.dev)return w.dev;throw Error("failed to call initLogConstructor");}function ka(a,b){if(!w.user)throw Error("failed to call initLogConstructor");w.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function x(a){return a||{}};function y(){var a=100;this.ma=a;this.R=this.Y=0;this.L=Object.create(null)}y.prototype.has=function(a){return!!this.L[a]};y.prototype.get=function(a){var b=this.L[a];if(b)return b.access=++this.R,b.payload};y.prototype.put=function(a,b){this.has(a)||this.Y++;this.L[a]={payload:b,access:this.R};if(!(this.Y<=this.ma)){ja().warn("lru-cache","Trimming LRU cache");a=this.L;var c=this.R+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Y--)}};x({c:!0,v:!0,a:!0,ad:!0,action:!0});var z,la;function ma(a){var b="macro-after-long-task";if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=
e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0)}Object.assign(c,na(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(d=a.AMP_CONFIG["allow-url-opt-in"],a=u(a.location.originalHash||a.location.hash),e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}var g=c;return!!g[b]}
function na(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){ja().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function A(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return B(a,b)}function C(a,b){var c=D(a);c=E(c);return B(c,b)}function D(a){return a.nodeType?A((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function E(a){a=D(a);return a.isSingleDoc()?a.win:a}function B(a,b){var c=F(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function oa(a,b){var c=pa(a,b);if(c)return c;a=F(a);a[b]=qa();return a[b].promise}
function pa(a,b){var c=F(a)[b];if(c){if(c.promise)return c.promise;B(a,b);return c.promise=Promise.resolve(c.obj)}return null}function F(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function qa(){var a=new ea,b=a,c=b.promise,d=b.resolve;b=b.reject;c.catch(function(){});return{obj:null,promise:c,resolve:d,reject:b,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var G;function ra(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a};function sa(a){var b=pa(E(a),"amp-analytics-instrumentation");if(b)return b;var c=D(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var l=b[g];l=l.getAttribute("custom-element")||l.getAttribute("custom-template");f[l]=!0}f=Object.keys(f)}else f=[];a=f.includes("amp-analytics")?A(a,"extensions").waitForExtension(a,"amp-analytics"):Promise.resolve();return a}).then(function(){var b=
c.win;return b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]?oa(E(a),"amp-analytics-instrumentation"):null})};function H(a){return C(a,"documentInfo").get()};function ta(a,b,c){sa(a).then(function(d){d&&d.triggerEventForTarget(a,b,c)})};function ua(a,b){var c=!0;c=void 0===c?!1:c;var d=void 0===d?!1:d;var e=a.ownerDocument,f=ra(e,"amp-analytics",x({sandbox:"true",trigger:d?"":"immediate"})),g=ra(e,"script",x({type:"application/json"}));g.textContent=JSON.stringify(b);f.appendChild(g);f.CONFIG=b;c?(b=A(a.ownerDocument.defaultView,"extensions"),c=D(a),b.installExtensionForDoc(c,"amp-analytics")):sa(a).then(function(){});a.appendChild(f)}
function va(a,b){var c=this;this.da=a.getResourceId();this.H=a;this.w=b;for(var d in b.triggers){var e="sandbox-"+this.da+"-"+b.triggers[d].on;b.triggers[d].on=e}this.H.signals().whenSignal("load-start").then(function(){ua(c.H,b)})}va.prototype.trigger=function(a,b){ta(this.H,"sandbox-"+this.da+"-"+a,b)};function I(a){this.H=a;this.w={requests:{},triggers:{}}}I.prototype.setTransportConfig=function(a){this.w.transport=a};I.prototype.setExtraUrlParams=function(a){this.w.extraUrlParams=a};
I.prototype.track=function(a,b){b=Array.isArray(b)?b:[b];for(var c=[],d=0;d<b.length;d++){var e=a+"-request-"+d;this.w.requests[e]=b[d];c.push(e)}this.w.triggers[a]={on:a,request:c};return this};I.prototype.build=function(){var a=new va(this.H,this.w);this.w=null;return a};function wa(a){z||(z=self.document.createElement("a"),la=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new y));var b=la,c=z;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c=self;if(c.__AMP_MODE)c=c.__AMP_MODE;else{var e=self.AMP_CONFIG||{};var f=!!e.test||!(!c.__AMP_TEST&&!c.__karma__);var g=c.__karma__&&c.__karma__.config.amp.testOnIe,l=!!e.localDev||f,h=u(c.location.originalHash||c.location.hash);e=e.spt;var n=u(c.location.search);v||(v=l?"1910151804560":c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011910151804560");f={localDev:l,development:!!(0<=["1","actions","amp","amp4ads",
"amp4email"].indexOf(h.development)||c.AMP_DEV_MODE),examiner:"2"==h.development,filter:h.filter,geoOverride:h["amp-geo"],userLocationOverride:h["amp-user-location"],minified:!0,lite:void 0!=n.amp_lite,test:f,testIe:g,log:h.log,version:"1910151804560",rtvVersion:v,singlePassType:e};c=c.__AMP_MODE=f}d=c.test&&Object.freeze?Object.freeze(d):d;b&&b.put(a,d);a=d}var p=a.hostname;return p.replace(/^www\./,"")}function J(a){return a?a.hostname.replace(/^www\./,""):""}
function K(a,b){var c=b.excludedDomains;return c&&-1!==c.indexOf(a)}function xa(a,b){a=J(a);return K(a,b)};var L={pageTrackingUrl:"https://t.skimresources.com/api/track.php?data=${data}",linksTrackingUrl:"https://t.skimresources.com/api/link?data=${data}",nonAffiliateTrackingUrl:"https://t.skimresources.com/api/?call=track&rnd=${rnd}&data=${data}",beaconUrl:"https://r.skimresources.com/api"},Ca="facebook.com go.redirectingat.com go.skimresources.com instagram.com twitter.com youtube.com".split(" ");function N(a,b,c){this.N=b.tracking;for(var d=b.customTrackingId,e="",f=0;8>f;f++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.I={customTrackingId:d,guid:null,pageImpressionId:e,pageUrl:"CANONICAL_URL",pubcode:b.pubcode,referrer:c,timezone:"TIMEZONE"};this.h=b;a=new I(a);b=this.h.config;d=b.linksTrackingUrl;e=b.nonAffiliateTrackingUrl;a.track("page-impressions",b.pageTrackingUrl);a.track("link-impressions",d);a.track("non-affiliate-click",e);a.setTransportConfig(x({beacon:!0,
image:!0,xhrpost:!1}));this.S=a.build()}N.prototype.getTrackingInfo=function(){return this.I};N.prototype.setTrackingInfo=function(a){Object.assign(this.I,a)};
N.prototype.sendImpressionTracking=function(a){if(this.N){var b=this.I,c=b.pageImpressionId,d=b.timezone,e=b.pubcode,f=b.pageUrl,g=b.guid,l=x({pub:e,pag:f,guid:g,uuid:c,tz:d,jv:"amp@1.0.3"});b=Da(this,a);var h=b.numberAffiliateLinks,n=b.urls;b=this.I;b=Object.assign(x({slc:h,jsl:0,pref:b.referrer,uc:b.customTrackingId,t:1}),l);this.S.trigger("page-impressions",x({data:JSON.stringify(b)}));b=h;0!==b&&(b=Object.assign(x({dl:n,hae:b?1:0,typ:"l"}),l),this.S.trigger("link-impressions",x({data:JSON.stringify(b)})))}};
N.prototype.sendNaClickTracking=function(a){if(this.N&&!xa(a,this.h)){var b=this.I,c=b.pageImpressionId,d=b.timezone,e=b.customTrackingId;a=x({pubcode:b.pubcode,referrer:b.pageUrl,pref:b.referrer,site:"false",url:a.href,custom:a.getAttribute("data-skimlinks-custom-tracking-id")||e,xtz:d,uuid:c,product:"1",jv:"amp@1.0.3"});this.S.trigger("non-affiliate-click",x({data:JSON.stringify(a),rnd:"RANDOM"}))}};
function Da(a,b){var c=0,d=x({});b.forEach(function(b){var e=b.replacementUrl;b=b.anchor;var g=xa(b,a.h),l=!!e;l&&!g&&(d[b.href]=d[b.href]||x({ae:1,count:0}),d[b.href].count+=1,c+=1)});return{numberAffiliateLinks:c,urls:d}};function Ea(a,b){this.syncResponse=a;this.asyncResponse=b};function O(a,b,c){this.P=a;this.h=b;this.O=c;this.C=x({});this.firstRequest=null}O.prototype.fetchDomainResolverApi=function(a){var b=x({pubcode:this.h.pubcode,page:"",domains:a}),c=this.h.config.beaconUrl;c=c+"?data="+JSON.stringify(b);var d={method:"GET",ampCors:!1,credentials:"include"};return this.P.fetchJson(c,d).then(function(a){return a.json()})};
O.prototype.resolveUnknownAnchors=function(a){var b=Fa(this,a),c=null,d=Ga(this,a);if(d.length){Ha(this,d);var e=this.U(a,d);c=Ia(this,e,d)}return new Ea(b,c)};function Fa(a,b){return b.map(function(b){var c=null,e=J(b),f=K(e,a.h)?"ignore":a.C[e]||"unknown",g="affiliate"===f||"unknown"===f;g&&(c=a.O.getAffiliateUrl(b));return{anchor:b,replacementUrl:c}})}function Ga(a,b){return b.reduce(function(b,d){d=J(d);var c=a.C[d],f=K(d,a.h),g=-1!==b.indexOf(d);c||f||g||b.push(d);return b},[])}
function Ha(a,b){b.forEach(function(b){a.C[b]||(K(b,a.h)&&(a.C[b]="ignore"),a.C[b]="unknown")})}O.prototype.U=function(a,b){return a.filter(function(a){var c=J(a);return-1!==b.indexOf(c)})};function Ia(a,b,c){var d=a.fetchDomainResolverApi(c);a.firstRequest||(a.firstRequest=d);return d.then(function(d){var e=d.merchant_domains||[];Ja(a,c,e);return Fa(a,b)})}function Ja(a,b,c){b.forEach(function(b){var d=-1!==c.indexOf(b);a.C[b]=d?"affiliate":"non-affiliate"})};var P,Ka="Webkit webkit Moz moz ms O o".split(" ");var La=!1;function Q(){this.l=[]}Q.prototype.peek=function(){var a=this.l.length;return a?this.l[a-1].item:null};Q.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=b,d=-1,e=0,f=this.l.length;e<=f;){d=Math.floor((e+f)/2);if(d===this.l.length)break;if(this.l[d].priority<c)e=d+1;else if(0<d&&this.l[d-1].priority>=c)f=d-1;else break}this.l.splice(d,0,{item:a,priority:b})};Q.prototype.forEach=function(a){for(var b=this.l.length;b--;)a(this.l[b].item)};
Q.prototype.dequeue=function(){return this.l.length?this.l.pop().item:null};da.Object.defineProperties(Q.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.l.length}}});var Ma=/nochunking=1/.test(self.location.hash),R=Promise.resolve();function Na(a,b){if(Ma)R.then(b);else{var c=S,d=D(a),e=E(d),f=F(e),g=f.chunk;g||(g=f.chunk={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});g.ctor||g.obj||(g.ctor=c,g.context=d,g.resolve&&B(e,"chunk"));C(a,"chunk").run(b,10)}}function T(a){this.state="not_run";this.T=a}function Oa(a,b){if("run"!=a.state){a.state="run";try{a.T(b)}catch(c){throw a.ga(),c;}}}
T.prototype.ya=function(){return this.T.displayName||this.T.name};T.prototype.ga=function(){};T.prototype.ea=function(){return!1};T.prototype.ia=function(){return!1};function U(a,b,c){T.call(this,a);this.$=c}ca(U,T);
U.prototype.ga=function(){var a=self.document;if(!La){La=!0;a=a.body;var b={opacity:1,visibility:"visible",animation:"none"},c;for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(2>g.length?0:0==g.lastIndexOf("--",0))f=g;else{P||(P=Object.create(null));var l=P[g];if(!l){l=g;if(void 0===f[g]){var h=g;h=h.charAt(0).toUpperCase()+h.slice(1);b:{for(var n=0;n<Ka.length;n++){var p=Ka[n]+h;if(void 0!==f[p]){h=p;break b}}h=""}void 0!==f[h]&&(l=h)}P[g]=l}f=l}f&&(d.style[f]=e)}}};U.prototype.ea=function(){return this.$.ampdoc.isVisible()};
U.prototype.ia=function(){return this.$.aa};function S(a){var b=this;this.ampdoc=a;this.B=a.win;this.D=new Q;this.Z=this.ca.bind(this);this.G=0;this.pa=ma(this.B);this.M=!1;this.ka=this.B.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.B.addEventListener("message",function(a){"amp-macro-task"==a.data&&b.ca(null)});this.aa=!1;oa(E(a),"viewer").then(function(){b.aa=!0});a.onVisibilityChanged(function(){a.isVisible()&&V(b)})}
S.prototype.run=function(a,b){var c=new T(a);this.D.enqueue(c,b);V(this)};S.prototype.runForStartup=function(a){a=new U(a,this.B,this);this.D.enqueue(a,Number.POSITIVE_INFINITY);V(this)};function Pa(a,b){for(var c=a.D.peek();c&&"not_run"!==c.state;)a.D.dequeue(),c=a.D.peek();c&&b&&a.D.dequeue();return c}
S.prototype.ca=function(a){var b=this,c=Pa(this,!0);if(!c)return this.M=!1,this.G=0,!1;try{var d=Date.now();Oa(c,a)}finally{R.then().then().then().then().then().then().then().then().then(function(){b.M=!1;b.G+=Date.now()-d;V(b)})}return!0};function Qa(a){a.pa&&a.ka&&5<a.G?(a.G=0,Ra(a)):R.then(function(){a.Z(null)})}function V(a){if(!a.M){var b=Pa(a);b&&(b.ea()?(a.M=!0,Qa(a)):b.ia()&&a.B.requestIdleCallback?Sa(a.B,a.Z):Ra(a))}}function Ra(a){a.B.postMessage("amp-macro-task","*")}
function Sa(a,b){function c(f){if(f.timeRemaining()<d){var g=2E3-(Date.now()-e);0>=g||f.didTimeout?b(f):a.requestIdleCallback(c,{timeout:g})}else b(f)}var d=15,e=Date.now();a.requestIdleCallback(c,{timeout:2E3})};function Ta(){this.F=[];this.X=[]}k=Ta.prototype;k.updateLinkList=function(a){this.X=a.map(this.getReplacementUrlForAnchor.bind(this));this.F=a};k.updateReplacementUrls=function(a){var b=this;a.forEach(function(a){var c=a.replacementUrl,e=b.F.indexOf(a.anchor);-1!==e&&(b.X[e]=c)})};k.getReplacementUrlForAnchor=function(a){a=this.F.indexOf(a);return-1!==a?this.X[a]:null};k.isInCache=function(a){return-1!==this.F.indexOf(a)};
k.getAnchorReplacementList=function(){var a=this;return this.F.map(function(b){return{anchor:b,replacementUrl:a.getReplacementUrlForAnchor(b)}})};function Ua(){this.j=null}k=Ua.prototype;k.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};k.remove=function(a){this.j&&(a=this.j.indexOf(a),-1<a&&this.j.splice(a,1))};k.removeAll=function(){this.j&&(this.j.length=0)};k.fire=function(a){if(this.j)for(var b=this.j,c=0;c<b.length;c++)(0,b[c])(a)};k.getHandlerCount=function(){return this.j?this.j.length:0};function Va(a,b,c,d){this.events=new Ua;this.id=b;this.A=a;this.ua=c;this.oa=d.linkSelector||"a";this.va=300;this.o=new Ta}k=Va.prototype;k.getReplacementUrl=function(a){return this.isWatchingLink(a)?this.o.getReplacementUrlForAnchor(a):null};k.getAnchorReplacementList=function(){return this.o.getAnchorReplacementList()};k.isWatchingLink=function(a){return this.o.isInCache(a)};
k.rewriteAnchorUrl=function(a){var b=this.getReplacementUrl(a);if(!b||b===a.href)return!1;a.setAttribute("data-link-rewriter-original-url",a.href);a.href=b;setTimeout(function(){a.href=a.getAttribute("data-link-rewriter-original-url");a.removeAttribute("data-link-rewriter-original-url")},this.va);return!0};
k.onDomUpdated=function(){var a=this;return new Promise(function(b){var c=a.A.nodeType==Node.DOCUMENT_NODE?a.A.documentElement:a.A;Na(c,function(){return Wa(a).then(function(){a.events.fire({type:"PAGE_SCANNED"});b()})})})};
function Wa(a){var b=Xa(a),c=a.U(b);a.o.updateLinkList(b);if(!c.length)return Promise.resolve();a.o.updateReplacementUrls(c.map(function(a){return{anchor:a,replacementUrl:null}}));var d=a.ua(c);ka(d instanceof Ea,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse');d.syncResponse&&a.o.updateReplacementUrls(d.syncResponse);return d.asyncResponse?d.asyncResponse.then(function(b){a.o.updateReplacementUrls(b)}):Promise.resolve()}
k.U=function(a){var b=this,c=[];a.forEach(function(a){b.isWatchingLink(a)||c.push(a)});return c};function Xa(a){var b=a.A.querySelectorAll(a.oa);return[].slice.call(b)};function X(a){this.A=a.getRootNode();var b=H(a).metaTags["amp-link-rewriter-priorities"];this.ta=b?b.trim().split(/\s+/):[];this.V=[];this.A.addEventListener("amp:dom-update",this.ra.bind(this));var c=C(a,"navigation");c.registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}X.prototype.registerLinkRewriter=function(a,b,c){var d=new Va(this.A,a,b,c);Ya(this.V,d,this.ta);d.onDomUpdated();return d};
X.prototype.maybeRewriteLink=function(a,b){var c=Za(this,a);if(c.length){for(var d=null,e=0;e<c.length;e++){var f=c[e].rewriteAnchorUrl(a);if(f){d=c[e];break}}var g={linkRewriterId:d?d.id:null,anchor:a,clickType:b.type};c.forEach(function(a){a.events.fire({type:"CLICK",eventData:g})})}};X.prototype.ra=function(){this.V.forEach(function(a){a.onDomUpdated()})};function $a(a){var b=a.hasAttribute("data-link-rewriters")?a.getAttribute("data-link-rewriters").trim():null;return b?b.split(/\s+/):[]}
function Ya(a,b,c){function d(a,b){var d=c.indexOf(a.id),g=c.indexOf(b.id);return-1===d&&-1===g?0:-1===d?e:-1===g?f:d>g?e:f}var e=1,f=-1;a.push(b);a.sort(d)}function Za(a,b){var c=$a(b);return a.V.reduce(function(a,e){e.isWatchingLink(b)&&Ya(a,e,c);return a},[])};function ab(a,b,c,d){this.N=c;this.na=d;this.la=H(a).canonicalUrl;this.xa=""+(new Date).getTimezoneOffset();this.h=b}
ab.prototype.getAffiliateUrl=function(a){if(!a)return null;var b=this.N.getTrackingInfo(),c=b.pubcode,d=b.pageImpressionId,e=b.customTrackingId;b=b.guid;var f=a.getAttribute("data-skimlinks-custom-tracking-id")||e,g=x({id:c,url:a.href,sref:this.la,pref:this.na,xguid:b,xuuid:d,xtz:this.xa,xs:"1",jv:"amp@1.0.3"});f&&(g.xcust=f);var l=this.h.waypointBaseUrl;a=g;c=[];for(h in a)if(d=a[h],null!=d)if(Array.isArray(d))for(e=0;e<d.length;e++)b=d[e],c.push(encodeURIComponent(h)+"="+encodeURIComponent(b));
else c.push(encodeURIComponent(h)+"="+encodeURIComponent(d));var h=c.join("&");a=l;h?(a=a.split("#",2),c=a[0].split("?",2),h=c[0]+(c[1]?"?"+c[1]+"&"+h:"?"+h),h+=a[1]?"#"+a[1]:""):h=a;return h};function Y(a,b){ka(a,"<amp-skimlinks> Invalid option => "+b)}
function bb(a,b){var c=a.getAttribute("publisher-code");Y(c,'"publisher-code" is required.');var d=[];b.canonicalUrl&&d.push(wa(b.canonicalUrl));b.sourceUrl&&d.push(wa(b.sourceUrl));b=cb(a,d);(d=a.getAttribute("tracking"))?(Y("true"===d||"false"===d,'"tracking" possible values are "true" or "false".'),d="true"===d):d=!0;var e=a.getAttribute("custom-tracking-id");e&&Y(50>=e.length,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.');var f=
a.getAttribute("link-selector")||null;var g;(g=a.getAttribute("custom-redirect-domain"))?(g=g.replace(/^\/\/|^https?:\/\/|\/$/g,""),g="http://"+g):g="https://go.skimresources.com";try{/^[\w-]+$/.test("script");if(void 0!==G)var l=G;else{try{var h=a.ownerDocument,n=h.createElement("div"),p=h.createElement("div");n.appendChild(p);var ya=n.querySelector(":scope div")===p}catch(za){ya=!1}l=G=ya}if(l)var Aa=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{a.classList.add("i-amphtml-scoped");
var db="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),eb=a.querySelectorAll(db);a.classList.remove("i-amphtml-scoped");Aa=eb}var W=Aa;if(1!==W.length)throw Error("Found "+W.length+" <script> children. Expected 1.");var M=W[0];if("SCRIPT"!=M.tagName||!M.hasAttribute("type")||"APPLICATION/JSON"!=M.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var fb=JSON.parse(M.textContent)}catch(za){throw Error("Failed to parse <script> contents. Is it valid JSON?");
}a=fb;var Ba={pageTrackingUrl:a.pageTrackingUrl||L.pageTrackingUrl,linksTrackingUrl:a.linksTrackingUrl||L.linksTrackingUrl,nonAffiliateTrackingUrl:a.nonAffiliateTrackingUrl||L.nonAffiliateTrackingUrl,beaconUrl:a.beaconUrl||L.beaconUrl}}catch(za){Ba=L}return{pubcode:c,excludedDomains:b,tracking:d,customTrackingId:e,linkSelector:f,waypointBaseUrl:g,config:Ba}}
function cb(a,b){var c=[].concat(b).concat(Ca),d=a.getAttribute("excluded-domains");d&&(c=c.concat(d.trim().split(/\s+/).map(function(a){return a.replace(/^www\./,"")})));return c};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.P=null;a.m=null;a.ba=null;a.ja=null;a.fa=null;a.h={};a.J=null;a.K=null;a.O=null;a.ha=null;a.W=null;return a}ca(Z,AMP.BaseElement);k=Z.prototype;
k.buildCallback=function(){var a=this;this.P=A(this.win,"xhr");this.m=this.getAmpDoc();this.ba=H(this.m);this.ja=C(this.m,"viewer");this.fa=new X(this.m);this.h=bb(this.element,this.ba);return this.m.waitForBodyOpen().then(function(){return a.ja.getReferrerUrl()}).then(function(b){a.W=b;a.signals().signal("load-start");b=new N(a.element,a.h,a.W);a.J=b;a.O=new ab(a.m,a.h,a.J,a.W);a.K=new O(a.P,a.h,a.O);a.ha=gb(a)})};k.wa=function(a){var b=this;this.J.setTrackingInfo({guid:a.guid});this.m.whenFirstVisible().then(function(){b.J.sendImpressionTracking(b.ha.getAnchorReplacementList())})};
k.sa=function(){var a=this.K.firstRequest||this.K.fetchDomainResolverApi([]);return a.then(this.wa.bind(this))};function gb(a){var b=a.fa.registerLinkRewriter("amp-skimlinks",function(b){return a.K.resolveUnknownAnchors(b)},{linkSelector:a.h.linkSelector}),c={},d=(c.PAGE_SCANNED=ia(a.sa.bind(a)),c.CLICK=a.qa.bind(a),c);b.events.add(function(a){var b=d[a.type];b&&b(a.eventData)});return b}k.qa=function(a){var b="amp-skimlinks"!==a.linkRewriterId&&"contextmenu"!==a.clickType;b&&this.J.sendNaClickTracking(a.anchor)};
k.isLayoutSupported=function(){return!0};(function(a){a.registerElement("amp-skimlinks",Z)})(self.AMP);
})});

//# sourceMappingURL=amp-skimlinks-0.1.js.map
