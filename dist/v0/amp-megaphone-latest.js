(self.AMP=self.AMP||[]).push({n:"amp-megaphone",v:"1910151804560",f:(function(AMP,_){
var e,f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var p={a:!0},t={};try{t.__proto__=p;l=t.a;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=k;var v=Object.prototype.toString;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function y(a){return a||{}};function z(a){return 1>a.length?!1:0==a.lastIndexOf("{",0)};y({c:!0,v:!0,a:!0,ad:!0,action:!0});var A;function B(a,b){var c=void 0,h=a,q=b;var m=function(a){try{return q(a)}catch(g){throw self.__AMP_REPORT_ERROR(g),g;}};var r=C(),n=!1;c&&(n=c.capture);h.addEventListener("message",m,r?c:n);return function(){h&&h.removeEventListener("message",m,r?c:n);m=h=q=null}}function C(){if(void 0!==A)return A;A=!1;try{var a={get capture(){A=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return A};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function D(a){var b;try{return JSON.parse(a)}catch(c){return b&&b(c),null}};function E(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.m=null;a.j=!1;a.l="";return a}var F=AMP.BaseElement;E.prototype=f(F.prototype);E.prototype.constructor=E;if(u)u(E,F);else for(var G in F)if("prototype"!=G)if(Object.defineProperties){var H=Object.getOwnPropertyDescriptor(F,G);H&&Object.defineProperty(E,G,H)}else E[G]=F[G];E.w=F.prototype;e=E.prototype;
e.preconnectCallback=function(a){this.preconnect.url(this.l,a);this.preconnect.url("https://assets.megaphone.fm",a);this.preconnect.url("https://megaphone.imgix.net",a)};e.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};e.buildCallback=function(){J(this)};e.mutatedAttributesCallback=function(){J(this);this.h&&(this.h.src=K(this))};
e.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.setAttribute("frameborder","no");a.setAttribute("scrolling","no");a.src=K(this);var b=this.o.bind(this);this.m=B(this.win,b);this.applyFillContent(a);this.element.appendChild(a);this.h=a;return this.loadPromise(a)};e.unlayoutCallback=function(){if(this.h){var a=this.h;a.parentElement&&a.parentElement.removeChild(a);this.h=null}this.m&&this.m();return!0};
function K(a){J(a);var b=a.element.getAttribute("data-playlist")||a.element.getAttribute("data-episode"),c=a.element;if(!w.user)throw Error("failed to call initLogConstructor");var h=w.user.assert(b,"data-playlist or data-episode is required for <amp-megaphone> %s",c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0),q=a.element.hasAttribute("data-light"),m=a.element.hasAttribute("data-sharing"),r=a.element.getAttribute("data-episodes");b=a.element.getAttribute("data-start");var n=a.element.hasAttribute("data-tile"),
I=y({p:a.j?h:void 0,light:q||void 0,sharing:m||void 0,episodes:a.j&&r||void 0,start:!a.j&&b||void 0,tile:!a.j&&n||void 0});a=a.l+"/"+(a.j?"":h+"/");b=I;c=[];for(d in b){var g=b[d];if(null!=g)if(Array.isArray(g))for(var x=0;x<g.length;x++){var L=g[x];c.push(encodeURIComponent(d)+"="+encodeURIComponent(L))}else c.push(encodeURIComponent(d)+"="+encodeURIComponent(g))}var d=c.join("&");d?(a=a.split("#",2),b=a[0].split("?",2),d=b[0]+(b[1]?"?"+b[1]+"&"+d:"?"+d),d+=a[1]?"#"+a[1]:""):d=a;return d}
function J(a){a.j=a.element.hasAttribute("data-playlist");a.l="https://"+(a.j?"playlist":"player")+".megaphone.fm"}e.o=function(a){if(a.origin==this.l&&a.source==this.h.contentWindow){var b=a.data;b&&("[object Object]"===v.call(b)||z(b))&&(a="[object Object]"===v.call(b)?b:D(b),"iframe.resize"==a.context&&this.attemptChangeHeight(a.height).catch(function(){}))}};e.pauseCallback=function(){this.h&&this.h.contentWindow&&this.h.contentWindow.postMessage(JSON.stringify(y({method:"pause"})),this.l)};
(function(a){a.registerElement("amp-megaphone",E)})(self.AMP);
})});

//# sourceMappingURL=amp-megaphone-0.1.js.map
