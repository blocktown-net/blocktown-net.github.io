(self.AMP=self.AMP||[]).push({n:"amp-viewer-integration",p:"high",v:"1910151804560",f:(function(AMP,_){
function p(a){var b=this;this.h=a;this.ea={ancestorOrigin:function(){var a=b.h.win.location.ancestorOrigins;return a?a[0]:""}}}p.prototype.get=function(){return this.ea};function r(){var a,b=Object.create(null);a&&Object.assign(b,a);return b}function t(a){return a||{}};var u;function v(a,b,c,d){var e=a,g=c;var f=function(a){try{return g(a)}catch(m){throw self.__AMP_REPORT_ERROR(m),m;}};var k=aa(),h=!1;d&&(h=d.capture);e.addEventListener(b,f,k?d:h);return function(){e&&e.removeEventListener(b,f,k?d:h);f=e=g=null}}function aa(){if(void 0!==u)return u;u=!1;try{var a={get capture(){u=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return u};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function w(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function y(a){var b=Object.create(null);if(!a)return b;for(var c;c=ba.exec(a);){var d=w(c[1],c[1]);c=c[2]?w(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b};var z="";function ca(a){var b=!1,c=null,d=a;return function(a){for(var e=[],f=0;f<arguments.length;++f)e[f-0]=arguments[f];b||(c=d.apply(self,e),b=!0,d=null);return c}};var A=self.AMP_CONFIG||{},da={thirdParty:A.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:A.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof A.thirdPartyFrameRegex?new RegExp(A.thirdPartyFrameRegex):A.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:A.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof A.cdnProxyRegex?new RegExp(A.cdnProxyRegex):A.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:A.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:A.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.dev$/]};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var B=self.__AMP_LOG;function C(a,b,c){if(!B.user)throw Error("failed to call initLogConstructor");B.user.assert(a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function ea(a){return a.parent&&a.parent!=a};function D(a,b,c,d){return v(a,b,c,d)}function E(a,b,c){var d=c,e=v(a,b,function(a){try{d(a)}finally{d=null,e()}},void 0)};function F(a,b){this.win=a;this.w=b;D(this.win.document,"focusin",this.G.bind(this),{capture:!1})}F.prototype.G=function(a){a.defaultPrevented||this.w.sendRequest(a.type,t({focusTargetRect:a.target.getBoundingClientRect()}),!1)};function G(){var a=100;this.Y=a;this.D=this.O=0;this.B=Object.create(null)}G.prototype.has=function(a){return!!this.B[a]};G.prototype.get=function(a){var b=this.B[a];if(b)return b.access=++this.D,b.payload};
G.prototype.put=function(a,b){this.has(a)||this.O++;this.B[a]={payload:b,access:this.D};if(!(this.O<=this.Y)){if(B.dev)a=B.dev;else throw Error("failed to call initLogConstructor");a.warn("lru-cache","Trimming LRU cache");a=this.B;var c=this.D+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var g=d}}void 0!==g&&(delete a[g],this.O--)}};var fa=t({c:!0,v:!0,a:!0,ad:!0,action:!0}),H,I,ha=/[?&]amp_js[^&]*/,ia=/[?&]amp_gsa[^&]*/,ja=/[?&]amp_r[^&]*/,ka=/[?&]amp_kit[^&]*/,la=/[?&]usqp[^&]*/;
function J(a){var b;H||(H=self.document.createElement("a"),I=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new G));var c=b?null:I,d=H;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;
e.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;d=self;if(d.__AMP_MODE)d=d.__AMP_MODE;else{var g=self.AMP_CONFIG||{};var f=!!g.test||!(!d.__AMP_TEST&&!d.__karma__);var k=d.__karma__&&d.__karma__.config.amp.testOnIe,h=!!g.localDev||f,l=y(d.location.originalHash||d.location.hash);g=g.spt;var m=y(d.location.search);z||(z=h?"1910151804560":d.AMP_CONFIG&&d.AMP_CONFIG.v?d.AMP_CONFIG.v:"011910151804560");f={localDev:h,development:!!(0<=["1","actions",
"amp","amp4ads","amp4email"].indexOf(l.development)||d.AMP_DEV_MODE),examiner:"2"==l.development,filter:l.filter,geoOverride:l["amp-geo"],userLocationOverride:l["amp-user-location"],minified:!0,lite:void 0!=m.amp_lite,test:f,testIe:k,log:l.log,version:"1910151804560",rtvVersion:z,singlePassType:g};d=d.__AMP_MODE=f}e=d.test&&Object.freeze?Object.freeze(e):e;c&&c.put(a,e);a=e}return a}
function ma(a){"string"==typeof a&&(a=J(a));var b=a;"string"==typeof b&&(b=J(b));if(!da.cdnProxyRegex.test(b.origin))return a.href;b=a.pathname.split("/");C(fa[b[1]],"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);C(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(ha,"").replace(ia,"").replace(ja,"").replace(ka,"").replace(la,"").replace(/^[?&]/,
""))?"?"+d:"":"";return b+d+(a.hash||"")};function na(a,b){var c,d=a=a.__AMP_TOP||(a.__AMP_TOP=a),e=a,g=K(d),f=g["viewer-integration-variable"];f||(f=g["viewer-integration-variable"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});f.ctor||f.obj||(f.ctor=b,f.context=e,f.resolve&&L(d,"viewer-integration-variable"));c&&L(a,"viewer-integration-variable")}function M(a,b){var c=N(a);c=N(c);c=c.isSingleDoc()?c.win:c;return L(c,b)}
function N(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=L(b,"ampdoc").getAmpDoc(a)}return a}function L(a,b){var c=K(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function K(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b};var O,oa="Webkit webkit Moz moz ms O o".split(" ");function pa(a,b,c){var d;var e=a.style;if(2>b.length||0!=b.lastIndexOf("--",0)){O||(O=r());var g=O[b];if(!g){g=b;if(void 0===e[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var k=0;k<oa.length;k++){var h=oa[k]+f;if(void 0!==e[h]){f=h;break b}}f=""}void 0!==e[f]&&(g=f)}O[b]=g}b=g}b&&(a.style[b]=d?c+d:c)}function qa(a,b){for(var c in b)pa(a,c,b[c])};function P(a){this.J=a;this.F=[];this.C=0}P.prototype.add=function(a){this.F[this.C]=a;this.C=(this.C+1)%this.J};P.prototype.get=function(a){this.F.length>=this.J&&(a=(this.C+a)%this.J);return this.F[a]};var ra=/[,.\s\u2022()]/;function sa(a){return"\u2019"==a||"\u2018"==a?"'":"\u201c"==a||"\u201d"==a?'"':a.toLowerCase()}
function ta(a,b,c,d,e){if(c>=d)return null;a=a.document;var g=b.parentNode,f=b.wholeText;0<c&&g.insertBefore(a.createTextNode(f.substring(0,c)),b);var k=a.createElement("span");k.appendChild(a.createTextNode(f.substring(c,d)));g.insertBefore(k,b);e.push(k);var h=null;d<f.length&&(h=a.createTextNode(f.substring(d)),g.insertBefore(h,b));g.removeChild(b);return h}
function Q(a,b){this.ga=a;this.L=b;this.A=-1;this.o=null;if(b instanceof a.Text)this.A=0;else if(b instanceof a.Element){var c=(a.getComputedStyle(b)||r()).display;"none"!=c&&(b=b.firstChild,null!=b&&(this.o=new Q(a,b)))}}Q.prototype.next=function(){if(0<=this.A){var a;a:{for(a=this.L.wholeText;this.A<a.length;){a=this.A;this.A++;a={node:this.L,offset:a};break a}a=null}return a}for(;null!=this.o;){a=this.o.next();if(null!=a)return a;var b=this.o.L.nextSibling;this.o=null!=b?new Q(this.ga,b):null}return null};function ua(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function va(a,b){var c=ua,d=c(a);if(d)b(a);else{var e=function(){c(a)&&(d||(d=!0,b(a)),a.removeEventListener("readystatechange",e))};a.addEventListener("readystatechange",e)}}function wa(a){return new Promise(function(b){va(a,b)})};function xa(a){a=y(a.win.location.hash).highlight;if(!a||102400<a.length)return null;var b=JSON.parse(a),c=b.s;if(!(c instanceof Array)||15<c.length)return null;var d=0;for(a=0;a<c.length;a++){var e=c[a];if("string"!=typeof e||!e)return null;d+=e.length;if(1500<d)return null}var g=!1;b.n&&(g=!0);var f=!1;b.na&&(f=!0);return{sentences:c,skipScrollAnimation:f,skipRendering:g}}
function R(a,b){var c=this;this.h=a;this.fa=M(a,"viewer");this.l=M(this.h,"viewport");this.j=null;wa(a.win.document).then(function(){ya(c,b)})}function S(a,b,c){var d=t({state:b}),e;for(e in c)d[e]=c[e];a.fa.sendMessage("highlightState",d)}
function za(a,b){var c=a.h.win;a:{var d=a.h.getBody();b=b.sentences;d=new Q(c,d);for(var e=[],g=0;g<b.length;g++){for(var f=b[g],k=[],h=0;h<f.length;h++){var l=f[h];ra.test(l)||k.push(sa(l))}if(f=k.join("")){k={};for(h=0;h<f.length;h++)k[f[h]]=f.length-1-h;h=new P(f.length);l=-1;for(var m=f.length-1;;){var q=d.next();if(null==q){b=null;break a}if(!(ra.test(q.node.wholeText[q.offset])||(h.add(q),l++,l<m))){q=!0;for(var x=0;x<f.length;x++){var n=h.get(f.length-x-1);n=sa(n.node.wholeText[n.offset]);
if(f[f.length-1-x]!=n){q=!1;n=k[n];null==n&&(n=f.length);n-=x;1>n&&(n=1);m+=n;break}}if(q){f=h.get(f.length-1);e.push({start:h.get(0),end:{node:f.node,offset:f.offset+1}});break}}}}}b=0<e.length?e:null}if(b){d=[];e=null;for(g=0;g<b.length;g++)f=b[g],e&&e.end.node==f.start.node&&e.end.offset==f.start.offset?e.end=f.end:(e=f,d.push(f));b=d;d=[];for(e=0;e<b.length;e++)for(g=b[e],k=g.start,h=g.end,f=b,g=e;;){if(k.node==h.node){if(k=ta(c,k.node,k.offset,h.offset,d))for(g+=1;g<f.length;g++){l=f[g];if(h.node!=
l.start.node)break;l.start.node=k;l.start.offset-=h.offset;if(h.node!=l.end.node)break;l.end.node=k;l.end.offset-=h.offset}break}a:for(l=!0,m=k.node;;){if(null==m){l=null;break a}if(l)(q=m.nextSibling)?(m=q,l=!1):m=m.parentNode;else{if(m instanceof c.Text){l=m;break a}m.firstChild?m=m.firstChild:l=!0}}ta(c,k.node,k.offset,k.node.wholeText.length,d);if(!l)break;k={node:l,offset:0}}d&&0!=d.length&&(a.j=d)}}
R.prototype.onVisibleOnce=function(a){var b=this;a=ca(a);this.h.onVisibilityChanged(function(){"visible"==b.h.getVisibilityState()&&a()})};
function ya(a,b){if(a.h.win.document.querySelector('script[id="amp-access"]'))S(a,"has_amp_access");else if(za(a,b),a.j){var c=T(a);S(a,"found",t({scroll:c}));if(!b.skipRendering){for(var d=0;d<a.j.length;d++)qa(a.j[d],{backgroundColor:"#fcff00",color:"#000"});var e=a.h.getVisibilityState();b.skipScrollAnimation?"visible"==e?Aa(a,c):(a.l.setScrollTop(c),a.onVisibleOnce(function(){Aa(a,T(a))})):"visible"==e?Ba(a,c):(a.l.setScrollTop(Math.max(0,c-500)),a.onVisibleOnce(function(){Ba(a,T(a))}));E(a.h.getBody(),
"click",a.T.bind(a))}}else S(a,"not_found")}function T(a){var b=a.j;if(!b)return 0;a=a.l;for(var c=Number.MAX_VALUE,d=0,e=a.getPaddingTop(),g=0;g<b.length;g++){var f=a.getLayoutRect(b[g]),k=-e;if(0==k||0==f.width&&0==f.height)var h=f;else{h=f.left+0;k=f.top+k;var l=f.width;f=f.height;h={left:h,top:k,width:l,height:f,bottom:k+f,right:h+l,x:h,y:k}}f=h.bottom;c=Math.min(c,h.top);d=Math.max(d,f)}if(c>=d)return 0;b=a.getHeight()-e;b=(d+c-b)/2;b>c-80&&(b=c-80);return 0<b?b:0}
function Aa(a,b){S(a,"auto_scroll");a.l.setScrollTop(b);S(a,"shown")}
function Ba(a,b){a.l.setScrollTop(Math.max(0,b-500));var c=a.h.win.document.createElement("div");c.style.display="block";qa(c,{position:"absolute",top:Math.floor(b)+"px",height:"1px",left:"0",width:"1px","pointer-events":"none"});var d=a.h.getBody();d.appendChild(c);S(a,"auto_scroll");a.l.animateScrollIntoView(c).then(function(){d.removeChild(c);var e=T(a);var g=a.l.getScrollTop();if(g==e&&g==b)e=null;else{var f={};g!=e&&(a.l.setScrollTop(e),f.nd=g-e);g!=b&&(f.od=g-b);e=f}S(a,"shown",e)})}
R.prototype.setupMessaging=function(a){a.registerHandler("highlightDismiss",this.T.bind(this))};R.prototype.T=function(){if(this.j)for(var a=0;a<this.j.length;a++)for(var b=this.j[a],c=["backgroundColor","color"],d=0;d<c.length;d++)pa(b,c[d],null)};var Ca="key code location ctrlKey shiftKey altKey metaKey repeat isComposing charCode keyCode which".split(" ");function U(a,b){this.win=a;this.w=b;a=this.H.bind(this);v(this.win,"keydown",a,void 0);v(this.win,"keypress",a,void 0);v(this.win,"keyup",a,void 0)}U.prototype.H=function(a){Da(a)||this.G(a)};U.prototype.G=function(a){this.w.sendRequest(a.type,Ea(a),!1)};
function Da(a){if(a.defaultPrevented)return!0;if("Escape"==a.key)return!1;switch(a.target.nodeName){case "INPUT":return"checkbox"!=a.target.type||" "==a.key;case "TEXTAREA":case "BUTTON":case "SELECT":case "OPTION":return!0}return a.target.hasAttribute&&a.target.hasAttribute("contenteditable")}function Ea(a){var b={};Ca.forEach(function(c){void 0!==a[c]&&(b[c]=a[c])});return b};function Fa(a){if("string"!=typeof a)return a;if("{"!=a.charAt(0))return null;try{return JSON.parse(a)}catch(b){return null}}function V(a,b,c){this.win=a;this.V=b;this.W=c}V.prototype.addEventListener=function(a,b){var c=this;this.win.addEventListener("message",function(a){a.origin==c.V&&a.source==c.W&&"__AMPHTML__"==a.data.app&&b(a)})};V.prototype.postMessage=function(a){this.W.postMessage(a,this.V)};V.prototype.start=function(){};
function W(a,b,c,d){this.win=a;this.M=b;this.aa=!!c;this.X=d||null;this.ba=0;this.R={};this.K={};this.S=null;this.M.addEventListener("message",this.Z.bind(this));this.M.start()}W.prototype.registerHandler=function(a,b){this.K[a]=b};W.prototype.unregisterHandler=function(a){delete this.K[a]};W.prototype.setDefaultHandler=function(a){this.S=a};
W.prototype.Z=function(a){if(a=Fa(a.data))if("q"==a.type)Ga(this,a);else if("s"==a.type){var b=a.requestid,c=this.R[b];c&&(delete this.R[b],a.error?(Ha(this,"amp-viewer-messaging: handleResponse_ error: ",a.error),c.reject(Error("Request "+a.name+" failed: "+a.error))):c.resolve(a.data))}};W.prototype.sendRequest=function(a,b,c){var d=this,e=++this.ba,g=void 0;c&&(g=new Promise(function(a,b){d.R[e]={resolve:a,reject:b}}));X(this,{app:"__AMPHTML__",requestid:e,type:"q",name:a,data:b,rsvp:c});return g};
function Ia(a,b,c,d){var e=d?d.message?d.message:String(d):"unknown error";Ha(a,"amp-viewer-messaging: sendResponseError_, Message name: "+c,e);X(a,{app:"__AMPHTML__",requestid:b,type:"s",name:c,data:null,error:e})}function X(a,b){var c=Object.assign(b,{});a.X&&(c.messagingToken=a.X);a.M.postMessage(a.aa?JSON.stringify(c):c)}
function Ga(a,b){var c=a.K[b.name];c||(c=a.S);if(!c)throw c=Error("Cannot handle request because handshake is not yet confirmed!"),c.args=b.name,c;c=c(b.name,b.data,!!b.rsvp);if(b.rsvp){var d=b.requestid;if(!c)throw Ia(a,d,b.name,Error("no response")),Error("expected response but none given: "+b.name);c.then(function(c){X(a,{app:"__AMPHTML__",requestid:d,type:"s",name:b.name,data:c})},function(c){Ia(a,d,b.name,c)})}}
function Ha(a,b,c){var d="amp-messaging-error-logger: "+b,e=" data: "+(c?c.message?c.message:String(c):"unknown error");d+=e;a.win.viewerState=d};var Ja="altKey charCode ctrlKey detail eventPhase key layerX layerY metaKey pageX pageY returnValue shiftKey timeStamp type which".split(" "),Ka="clientX clientY force identifier pageX pageY radiusX radiusY screenX screenY".split(" ");function Y(a,b){this.win=a;this.w=b;this.N=!1;this.P=[];b.registerHandler("scrollLock",this.ca.bind(this));La(this)}
function La(a){var b=a.H.bind(a),c=a.win.document,d={capture:!1,passive:!a.N};a.P.push(v(c,"touchstart",b,d),v(c,"touchend",b,d),v(c,"touchmove",b,d))}function Ma(a){a.P.forEach(function(a){return a()});a.P.length=0}Y.prototype.H=function(a){switch(a.type){case "touchstart":case "touchend":case "touchmove":if(a&&a.type){var b=Na(a,Ja);a.touches&&(b.touches=Oa(a.touches));a.changedTouches&&(b.changedTouches=Oa(a.changedTouches));this.w.sendRequest(a.type,b,!1)}this.N&&a.cancelable&&a.preventDefault()}};
function Oa(a){for(var b=[],c=0;c<a.length;c++)b.push(Na(a[c],Ka));return b}function Na(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];void 0!==a[e]&&(c[e]=a[e])}return c}Y.prototype.ca=function(a,b,c){this.N=!!b;Ma(this);La(this);return c?Promise.resolve({}):void 0};function Z(a){var b=this;this.win=a;this.U=this.m=!1;this.I=null;this.da=new p(N(this.win.document));na(this.win,function(){return b.da.get()})}
Z.prototype.init=function(){var a=this,b=N(this.win.document),c=M(b,"viewer");this.m="1"==c.getParam("webview");this.U=c.hasCapability("handshakepoll");var d=c.getParam("messagingToken"),e=c.getParam("origin")||"";if(!this.m&&!e)return Promise.resolve();if(this.m||this.U){var g=ea(this.win)?this.win.parent:null;return Pa(this,g,e).then(function(f){return Qa(a,c,b,e,new W(a.win,f,a.m,d))})}if(g=xa(b))this.I=new R(b,g);g=new V(this.win,e,this.win.parent);return Qa(this,c,b,e,new W(this.win,g,this.m,
d))};function Pa(a,b,c){return new Promise(function(d){var e=D(a.win,"message",function(g){var f=Fa(g.data);if(f&&g.origin===c&&g.source===b&&"__AMPHTML__"==f.app&&"handshake-poll"==f.name){if(a.m&&(!g.ports||!g.ports.length))throw Error("Did not receive communication port from the Viewer!");g=g.ports&&0<g.ports.length?g.ports[0]:new V(a.win,c,a.win.parent);d(g);e()}})})}
function Qa(a,b,c,d,e){var g=c.getUrl(),f=ma(g);return e.sendRequest("channelOpen",t({url:g,sourceUrl:f}),!0).then(function(){Ra(a,e,b,d)})}function Ra(a,b,c,d){b.setDefaultHandler(function(a,b,d){return c.receiveMessage(a,b,d)});c.setMessageDeliverer(b.sendRequest.bind(b),d);E(a.win,"unload",a.$.bind(a,b));c.hasCapability("swipe")&&new Y(a.win,b);c.hasCapability("keyboard")&&new U(a.win,b);c.hasCapability("focus-rect")&&new F(a.win,b);null!=a.I&&a.I.setupMessaging(b)}
Z.prototype.$=function(a){return a.sendRequest("unloaded",{},!0)};(function(a){(new Z(a.win)).init()})(self.AMP);
})});

//# sourceMappingURL=amp-viewer-integration-0.1.js.map
