(self.AMP=self.AMP||[]).push({n:"amp-truncate-text",v:"1910151804560",f:(function(AMP,_){
var k="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var p={a:!0},q={};try{q.__proto__=p;n=q.a;break a}catch(a){}n=!1}m=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var r=m;function t(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var u=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function v(a){return a?Array.prototype.slice.call(a):[]};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function x(a){if(!w.user)throw Error("failed to call initLogConstructor");w.user.assert(a,"The amp-truncate-text experiment must be enabled to use this component.",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function y(a){return a.trimEnd?a.trimEnd():("_"+a).trim().slice(1)};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});function z(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=
e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0)}Object.assign(c,A(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){d=a.AMP_CONFIG["allow-url-opt-in"];e=a.location.originalHash||a.location.hash;a=Object.create(null);if(e)for(var g;g=u.exec(e);)f=t(g[1],g[1]),g=g[2]?t(g[2].replace(/\+/g," "),g[2]):"",a[f]=g;for(e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}}var h=
c;return!!h[b]}function A(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){if(w.dev)a=w.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function B(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=C(b,"ampdoc").getAmpDoc(a)}return a}function C(a,b){D(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function D(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function E(a,b){for(var c;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}function F(a){return a.closest?a.closest("a[href]"):E(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"a[href]"):!1})}function G(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)};var H;function I(a){a=a.ownerDocument||a;H&&H.ownerDocument===a||(H=a.createElement("div"));return J}function J(a){var b=H;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a};function K(a,b){var c=1,d=1;c=void 0===c?0:c;d=void 0===d?1:d;var e=0,f=a-1,g=NaN;for(a=NaN;f>=e;){var h=e+Math.floor((f-e)/2),l=b(h);if(0<l||0==l&&1==c)g=2==d?h:g,a=0==l?h:a,e=h+1;else if(0>l||0==l&&2==c)g=1==d?h:g,a=0==l?h:a,f=h-1;else{a=h;break}}return isNaN(a)?-((isNaN(g)?1==d?e:f:g)+1):a};function L(a,b){var c="slot"==a.localName?a.assignedNodes({flatten:!0}):a.childNodes;for(a=0;a<c.length;a++)b(c[a])}function M(a){var b=a.__AMP_TRUNCATE_TEXT_DATA;b&&b.modifiedText==a.data&&(a.data=b.originalText);a.nodeType==Node.ELEMENT_NODE&&a.removeAttribute("i-amphtml-truncate-child-overflow");L(a,function(a){return M(a)})}function N(a,b,c){a.__AMP_TRUNCATE_TEXT_DATA={originalText:b,modifiedText:c};a.data=c}
function O(a,b,c){c=void 0===c?[]:c;if(!b(a))return c;c.push(a);L(a,function(a){return O(a,b,c)});return c}function P(a,b,c){for(var d=O(a,function(a){return!c.includes(a)}),e=d.length-1;0<=e;e--){var f=d[e];f.nodeType==Node.ELEMENT_NODE&&f.setAttribute("i-amphtml-truncate-child-overflow","");if(f.nodeType==Node.TEXT_NODE&&Q(f,a,b))break}}
function Q(a,b,c){var d=document.createRange();d.selectNode(a);var e=d.getBoundingClientRect(),f=a.data;if(e.height)if(e.top>c.bottom)N(a,f,"");else{var g=K(f.length,function(d){for(;!f[d].trim()&&0<d;)d--;a.data=f.slice(0,d+1)+"\u2026 ";return-(b.scrollHeight-b.offsetHeight)}),h=0<=g?g+1:-(g+1),l=y(f.slice(0,h)),Z=l?l+"\u2026 ":"";N(a,f,Z);return!!l}};var aa=["<div class=i-amphtml-truncate-content><span class=i-amphtml-default-slot></span> <span class=i-amphtml-truncate-collapsed-slot name=collapsed></span> <span class=i-amphtml-truncate-expanded-slot name=expanded></span> <span class=i-amphtml-truncate-persistent-slot name=persistent></span></div>"],ba=["<div class=content><slot></slot><slot class=collapsed-slot name=collapsed></slot><slot class=expanded-slot name=expanded></slot><slot class=persistent-slot name=persistent></slot></div>"];
function R(a){var b=AMP.BaseElement.call(this,a)||this;b.h=null;b.j=null;b.l=null;b.o=null;b.m=!1;b.w=new b.win.MutationObserver(function(){S(b)});return b}var T=AMP.BaseElement;R.prototype=k(T.prototype);R.prototype.constructor=R;if(r)r(R,T);else for(var U in T)if("prototype"!=U)if(Object.defineProperties){var V=Object.getOwnPropertyDescriptor(T,U);V&&Object.defineProperty(R,U,V)}else R[U]=T[U];R.A=T.prototype;
function ca(a){a.registerAction("expand",function(){return W(a)},100);a.registerAction("collapse",function(){return X(a)},100)}R.prototype.buildCallback=function(){var a=this;x(z(this.win,"amp-truncate-text"));(this.m=!!this.element.attachShadow&&z(this.win,"amp-truncate-text-shadow"))?da(this):ea(this);ca(this);this.j.addEventListener("click",function(b){Y(a,b,!0)});this.l.addEventListener("click",function(b){Y(a,b,!1)})};
function ea(a){var b=I(a.element);a.h=b(aa);var c=a.h.querySelector(".i-amphtml-default-slot");a.j=a.h.querySelector(".i-amphtml-truncate-collapsed-slot");a.l=a.h.querySelector(".i-amphtml-truncate-expanded-slot");a.o=a.h.querySelector(".i-amphtml-truncate-persistent-slot");G(a.element.querySelectorAll('[slot="collapsed"]'),function(b){a.j.appendChild(b)});G(a.element.querySelectorAll('[slot="expanded"]'),function(b){a.l.appendChild(b)});G(a.element.querySelectorAll('[slot="persistent"]'),function(b){a.o.appendChild(b)});
a.getRealChildNodes().forEach(function(a){c.appendChild(a)});a.element.appendChild(a.h)}
function da(a){var b=I(a.element),c=a.element;b=b(ba);var d=c.querySelector("i-amphtml-sizer");d&&d.setAttribute("slot","i-amphtml-sizer");c=c.attachShadow({mode:"open"});d=document.createElement("style");d.textContent=":host{padding:0!important;border:none!important}:host([i-amphtml-truncate-expanded]){height:auto!important}:host([i-amphtml-truncate-expanded]) ::slotted(i-amphtml-sizer){display:none!important}:host([i-amphtml-truncate-expanded]) .content{position:static}:host(:not([i-amphtml-truncate-expanded])) .expanded-slot{display:none}.content{position:absolute;top:0;left:0;bottom:0;right:0}.expand-slot::slotted(*){margin:0!important;white-space:nowrap!important}:host(:not([i-amphtml-truncate-overflow])) .collapsed-slot{display:none}::slotted([i-amphtml-truncate-child-overflow]){display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text-shadow.css*/";var e=
document.createElement("slot");e.setAttribute("name","i-amphtml-sizer");c.appendChild(d);c.appendChild(e);c.appendChild(b);var f=c;a.h=null;a.j=f.querySelector(".collapsed-slot");a.l=f.querySelector(".expanded-slot");a.o=f.querySelector(".persistent-slot")}R.prototype.layoutCallback=function(){var a=this;return this.mutateElement(function(){S(a)})};R.prototype.firstAttachedCallback=function(){this.w.observe(this.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0})};
R.prototype.isRelayoutNeeded=function(){return!0};R.prototype.isLayoutSupported=function(){return!0};
function S(a){var b=a.m?a.element:a.h;var c=a.m?v(a.element.querySelectorAll('[slot="persistent"], [slot="collapsed"]')):v(a.element.querySelectorAll(".i-amphtml-truncate-persistent-slot, .i-amphtml-truncate-collapsed-slot"));b={container:b,overflowNodes:c};c=void 0===b?{}:b;b=c.container;c=c.overflowNodes;b.__AMP_TRUNCATE_TRUNCATED&&(b.__AMP_TRUNCATE_TRUNCATED=!1,b.removeAttribute("i-amphtml-truncate-overflow"),M(b));if(!(0>=b.scrollHeight-b.offsetHeight)){var d=b.getBoundingClientRect();b.__AMP_TRUNCATE_TRUNCATED=
!0;b.setAttribute("i-amphtml-truncate-overflow","");P(b,d,c)}a.w.takeRecords()}function Y(a,b,c){b=b.target;var d=a.element,e=d.ownerDocument.defaultView,f=e.__AMP_TOP||(e.__AMP_TOP=e),g=e!=f;f=z(f,"ampdoc-fie");g&&!f?d=D(e,"action")?C(e,"action"):null:(d=B(d),d=B(d),d=d.isSingleDoc()?d.win:d,d=D(d,"action")?C(d,"action"):null);var h=d;h.hasAction(b,"tap")||F(b)||(c?W(a):X(a))}function W(a){a.element.setAttribute("i-amphtml-truncate-expanded","")}
function X(a){a.element.removeAttribute("i-amphtml-truncate-expanded")}(function(a){a.registerElement("amp-truncate-text",R,"amp-truncate-text{padding:0!important;border:none!important}amp-truncate-text[i-amphtml-truncate-expanded]{height:auto!important}amp-truncate-text[i-amphtml-truncate-expanded]>i-amphtml-sizer{display:none!important}amp-truncate-text[i-amphtml-truncate-expanded] .i-amphtml-truncate-content{position:static!important}amp-truncate-text:not([i-amphtml-truncate-expanded]) .i-amphtml-truncate-expanded-slot{display:none!important}.i-amphtml-truncate-content{position:absolute!important;top:0!important;left:0!important;bottom:0!important;right:0!important}.i-amphtml-truncate-content [slot=expand]{margin:0!important;white-space:nowrap!important}.i-amphtml-truncate-content:not([i-amphtml-truncate-overflow]) .i-amphtml-truncate-collapsed-slot,[i-amphtml-truncate-child-overflow]{display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-truncate-text-0.1.js.map
