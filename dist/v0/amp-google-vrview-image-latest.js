(self.AMP=self.AMP||[]).push({n:"amp-google-vrview-image",v:"1910151804560",f:(function(AMP,_){
var h="function"==typeof Object.create?Object.create:function(a){function c(){}c.prototype=a;return new c},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var m;a:{var p={a:!0},q={};try{q.__proto__=p;m=q.a;break a}catch(a){}m=!1}k=m?function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}:null}var r=k;function u(a,c){c=void 0===c?"":c;try{return decodeURIComponent(a)}catch(b){return c}};var v=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function w(a){var c=Object.create(null);if(!a)return c;for(var b;b=v.exec(a);){var d=u(b[1],b[1]),e=b[2]?u(b[2].replace(/\+/g," "),b[2]):"";c[d]=e}return c};var x="";self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function z(){if(y.dev)return y.dev;throw Error("failed to call initLogConstructor");}function A(a,c,b,d,e){if(!y.user)throw Error("failed to call initLogConstructor");y.user.assert(a,c,b,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};function B(){var a=100;this.w=a;this.l=this.o=0;this.h=Object.create(null)}B.prototype.has=function(a){return!!this.h[a]};B.prototype.get=function(a){var c=this.h[a];if(c)return c.access=++this.l,c.payload};B.prototype.put=function(a,c){this.has(a)||this.o++;this.h[a]={payload:c,access:this.l};if(!(this.o<=this.w)){z().warn("lru-cache","Trimming LRU cache");a=this.h;var b=this.l+1,d;for(d in a){var e=a[d].access;if(e<b){b=e;var g=d}}void 0!==g&&(delete a[g],this.o--)}};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});var C,D;function E(a,c,b){c=encodeURIComponent(c)+"="+encodeURIComponent(b);c&&(a=a.split("#",2),b=a[0].split("?",2),c=b[0]+(b[1]?"?"+b[1]+"&"+c:"?"+c),a=c+=a[1]?"#"+a[1]:"");return a};function F(a){var c="";try{"localStorage"in a&&(c=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){z().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var b=c?c.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<b.length;d++)0!=b[d].length&&("-"==b[d][0]?a[b[d].substr(1)]=!1:a[b[d]]=!0);return a};function I(a){a=AMP.BaseElement.call(this,a)||this;a.m="";a.j="";return a}var J=AMP.BaseElement;I.prototype=h(J.prototype);I.prototype.constructor=I;if(r)r(I,J);else for(var K in J)if("prototype"!=K)if(Object.defineProperties){var L=Object.getOwnPropertyDescriptor(J,K);L&&Object.defineProperty(I,K,L)}else I[K]=J[K];I.A=J.prototype;I.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
I.prototype.buildCallback=function(){var a=this.win;if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var b in a.AMP_CONFIG){var d=a.AMP_CONFIG[b];"number"===typeof d&&0<=d&&1>=d&&(c[b]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(b=a.AMP_CONFIG["allow-doc-opt-in"],d=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){d=
d.getAttribute("content").split(",");for(var e=0;e<d.length;e++)-1!=b.indexOf(d[e])&&(c[d[e]]=!0)}Object.assign(c,F(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(b=a.AMP_CONFIG["allow-url-opt-in"],a=w(a.location.originalHash||a.location.hash),d=0;d<b.length;d++)e=a["e-"+b[d]],"1"==e&&(c[b[d]]=!0),"0"==e&&(c[b[d]]=!1)}A(!!c["amp-google-vrview-image"],"TAG amp-google-vrview-image disabled");c=this.element.getAttribute("src");a=this.element;
var g=void 0===g?"source":g;A(null!=c,"%s %s must be available",a,g);b=c;if("string"==typeof b){C||(C=self.document.createElement("a"),D=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new B));d=D;var f=C;if(d&&d.has(b))b=d.get(b);else{f.href=b;f.protocol||(f.href=f.href);e={href:f.href,protocol:f.protocol,host:f.host,hostname:f.hostname,port:"0"==f.port?"":f.port,pathname:f.pathname,search:f.search,hash:f.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==
e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=f.origin&&"null"!=f.origin?f.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;f=self;if(f.__AMP_MODE)f=f.__AMP_MODE;else{var n=self.AMP_CONFIG||{};var t=!!n.test||!(!f.__AMP_TEST&&!f.__karma__);var M=f.__karma__&&f.__karma__.config.amp.testOnIe,G=!!n.localDev||t,l=w(f.location.originalHash||f.location.hash);n=n.spt;var N=w(f.location.search);x||(x=G?"1910151804560":f.AMP_CONFIG&&f.AMP_CONFIG.v?f.AMP_CONFIG.v:
"011910151804560");t={localDev:G,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(l.development)||f.AMP_DEV_MODE),examiner:"2"==l.development,filter:l.filter,geoOverride:l["amp-geo"],userLocationOverride:l["amp-user-location"],minified:!0,lite:void 0!=N.amp_lite,test:t,testIe:M,log:l.log,version:"1910151804560",rtvVersion:x,singlePassType:n};f=f.__AMP_MODE=t}e=f.test&&Object.freeze?Object.freeze(e):e;d&&d.put(b,e);b=e}}(d="https:"==b.protocol||"localhost"==b.hostname||"127.0.0.1"==
b.hostname)||(b=b.hostname,d=b.length-10,d=0<=d&&b.indexOf(".localhost",d)==d);A(d||/^(\/\/)/.test(c),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',a,g,c);this.m=c;g=E("https://storage.googleapis.com/vrview/2.0/index.html","image",this.m);this.element.hasAttribute("stereo")&&(g=E(g,"is_stereo","true"));var H=this.element.getAttribute("yaw");H&&(g=E(g,"start_yaw",H));this.element.hasAttribute("yaw-only")&&(g=E(g,"is_yaw_only",
"true"));this.j=g};I.prototype.preconnectCallback=function(){this.j&&(this.preconnect.preload(this.j),this.preconnect.preload(this.m))};I.prototype.createPlaceholderCallback=function(){return null};I.prototype.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.onload=function(){a.readyState="complete"};this.applyFillContent(a);a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.setAttribute("src",this.j);this.element.appendChild(a);return this.loadPromise(a)};
(function(a){a.registerElement("amp-google-vrview-image",I)})(self.AMP);
})});

//# sourceMappingURL=amp-google-vrview-image-0.1.js.map
