(self.AMP=self.AMP||[]).push({n:"amp-kaltura-player",v:"1910151804560",f:(function(AMP,_){
var e="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},g;if("function"==typeof Object.setPrototypeOf)g=Object.setPrototypeOf;else{var k;a:{var l={a:!0},m={};try{m.__proto__=l;k=m.a;break a}catch(a){}k=!1}g=k?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=g;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r=self.__AMP_LOG;function t(a){return a||{}};t({c:!0,v:!0,a:!0,ad:!0,action:!0});function u(a,b){var d;if(!b)return a;var c=a.split("#",2),f=c[0].split("?",2),h=f[0]+(f[1]?d?"?"+b+"&"+f[1]:"?"+f[1]+"&"+b:"?"+b);return h+=c[1]?"#"+c[1]:""}function v(a){var b=[],d;for(d in a){var c=a[d];if(null!=c)if(Array.isArray(c))for(var f=0;f<c.length;f++){var h=c[f];b.push(encodeURIComponent(d)+"="+encodeURIComponent(h))}else f=c,b.push(encodeURIComponent(d)+"="+encodeURIComponent(f))}return b.join("&")};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function w(a,b){var d,c=b||function(a){return a},f=a.dataset;a={};var h=d?d:/^param(.+)/,n;for(n in f){var p=n.match(h);if(p){var B=p[1][0].toLowerCase()+p[1].substr(1);a[c(B)]=f[n]}}return a};function x(a){a=AMP.BaseElement.call(this,a)||this;a.j=null;a.h="";a.l="";return a}var y=AMP.BaseElement;x.prototype=e(y.prototype);x.prototype.constructor=x;if(q)q(x,y);else for(var z in y)if("prototype"!=z)if(Object.defineProperties){var A=Object.getOwnPropertyDescriptor(y,z);A&&Object.defineProperty(x,z,A)}else x[z]=y[z];x.m=y.prototype;x.prototype.preconnectCallback=function(a){this.preconnect.url("https://cdnapisec.kaltura.com",a)};
x.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
x.prototype.buildCallback=function(){var a=this.element.getAttribute("data-partner"),b=this.element;if(!r.user)throw Error("failed to call initLogConstructor");this.h=r.user.assert(a,"The data-partner attribute is required for <amp-kaltura-player> %s",b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);this.l=this.element.getAttribute("data-entryid")||"default"};
x.prototype.layoutCallback=function(){var a=this.element.getAttribute("data-uiconf")||this.element.getAttribute("data-uiconf-id")||"default",b=this.element.ownerDocument.createElement("iframe"),d="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/sp/"+encodeURIComponent(this.h)+"00/embedIframeJs/uiconf_id/"+encodeURIComponent(a)+"/partner_id/"+encodeURIComponent(this.h)+"?iframeembed=true&playerId=kaltura_player_amp&entry_id="+encodeURIComponent(this.l),c=w(this.element,function(a){return"flashvars["+
a+"]"});d=u(d,v(c));b.setAttribute("frameborder","0");b.setAttribute("allowfullscreen","true");b.src=d;this.applyFillContent(b);this.element.appendChild(b);this.j=b;return this.loadPromise(b)};
x.prototype.createPlaceholderCallback=function(){var a=this.win.document.createElement("amp-img");this.propagateAttributes(["aria-label"],a);var b=this.element.getAttribute("width"),d=this.element.getAttribute("height"),c="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/thumbnail/entry_id/"+encodeURIComponent(this.l);b&&(c+="/width/"+b);d&&(c+="/height/"+d);a.setAttribute("src",c);a.setAttribute("layout","fill");a.setAttribute("placeholder","");a.setAttribute("referrerpolicy","origin");
a.hasAttribute("aria-label")?a.setAttribute("alt","Loading video - "+a.getAttribute("aria-label")):a.setAttribute("alt","Loading video");return a};x.prototype.pauseCallback=function(){this.j&&this.j.contentWindow&&this.j.contentWindow.postMessage(JSON.stringify(t({method:"pause",value:""})),"*")};(function(a){a.registerElement("amp-kaltura-player",x)})(self.AMP);
})});

//# sourceMappingURL=amp-kaltura-player-0.1.js.map
